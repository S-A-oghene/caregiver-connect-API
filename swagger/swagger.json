{
  "openapi": "3.0.0",
  "info": {
    "title": "Caregiver Connect API",
    "version": "1.0.0",
    "description": "API documentation for Caregiver Connect platform."
  },
  "servers": [
    { "url": "https://caregiver-connect-api.onrender.com", "description": "Production Server" },
    { "url": "http://localhost:3000", "description": "Local Development Server" }
  ],
  "paths": {
    "/auth/login": {
      "get": {
        "summary": "Log in with GitHub",
        "description": "Initiates the GitHub OAuth2 login flow. **Do not use the 'Execute' button.** Instead, open [this link](/auth/login) in a new browser tab to log in.",
        "responses": { "302": { "description": "Redirect to GitHub for authentication." } }
      }
    },
    "/auth/github/callback": {
      "get": {
        "summary": "GitHub OAuth callback",
        "description": "This is the callback URL that GitHub redirects to after a user authorizes the application. It is handled automatically by the server and not intended for direct use.",
        "responses": { "302": { "description": "Redirects to the API documentation after successful login." } }
      }
    },
    "/auth/status": {
      "get": {
        "summary": "Check authentication status",
        "description": "Checks if the user is currently authenticated and returns user data if a session exists.",
        "security": [{ "cookieAuth": [] }],
        "responses": { "200": { "description": "Authenticated user data" }, "401": { "description": "Unauthorized" } }
      }
    },
    "/auth/logout": {
      "get": {
        "summary": "Log out",
        "description": "Logs out the current user by destroying the session. **Do not use the 'Execute' button.** Instead, open [this link](/auth/logout) in a new browser tab to log out.",
        "responses": { "302": { "description": "Redirects to the API documentation after successful logout." } }
      }
    },
    "/users/me": {
      "get": {
        "summary": "Get current user profile",
        "security": [{ "cookieAuth": [] }],
        "responses": { "200": { "description": "User profile" }, "401": { "description": "Unauthorized" } }
      },
      "put": {
        "summary": "Update current user profile",
        "security": [{ "cookieAuth": [] }],
        "requestBody": {
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
        },
        "responses": { "200": { "description": "Updated user profile" }, "400": { "description": "Validation error" }, "401": { "description": "Unauthorized" } }
      }
    },
    "/profiles": {
      "get": {
        "summary": "Get all caregiver profiles",
        "responses": { "200": { "description": "List of profiles" } }
      },
      "post": {
        "summary": "Create caregiver profile",
        "security": [{ "cookieAuth": [] }],
        "requestBody": {
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/CaregiverProfile" } } }
        },
        "responses": { "201": { "description": "Profile created" }, "400": { "description": "Validation error" }, "401": { "description": "Unauthorized" } }
      }
    },
    "/profiles/{id}": {
      "get": {
        "summary": "Get caregiver profile by user ID",
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
        "responses": { "200": { "description": "Profile" }, "404": { "description": "Not found" } }
      },
      "put": {
        "summary": "Update caregiver profile",
        "security": [{ "cookieAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
        "requestBody": {
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/CaregiverProfile" } } }
        },
        "responses": { "200": { "description": "Profile updated" }, "400": { "description": "Validation error" }, "401": { "description": "Unauthorized" }, "404": { "description": "Not found" } }
      },
      "delete": {
        "summary": "Delete caregiver profile",
        "security": [{ "cookieAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
        "responses": { "200": { "description": "Profile deleted" }, "401": { "description": "Unauthorized" }, "403": { "description": "Forbidden" }, "404": { "description": "Not found" } }
      }
    },
    "/bookings_commented_out_for_w06": {
      "get": {
        "summary": "Get all bookings for current user",
        "security": [{ "cookieAuth": [] }],
        "responses": { "200": { "description": "List of bookings" }, "401": { "description": "Unauthorized" } }
      },
      "post": {
        "summary": "Create booking",
        "security": [{ "cookieAuth": [] }],
        "requestBody": {
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Booking" } } }
        },
        "responses": { "201": { "description": "Booking created" }, "400": { "description": "Validation error" }, "401": { "description": "Unauthorized" } }
      }
    },
    "/bookings/{id}_commented_out_for_w06": {
      "get": {
        "summary": "Get booking by ID",
        "security": [{ "cookieAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
        "responses": { "200": { "description": "Booking" }, "404": { "description": "Not found" }, "401": { "description": "Unauthorized" } }
      },
      "put": {
        "summary": "Update booking",
        "security": [{ "cookieAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
        "requestBody": {
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Booking" } } }
        },
        "responses": { "200": { "description": "Booking updated" }, "400": { "description": "Validation error" }, "401": { "description": "Unauthorized" }, "404": { "description": "Not found" } }
      },
      "delete": {
        "summary": "Delete booking",
        "security": [{ "cookieAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
        "responses": { "200": { "description": "Booking deleted" }, "404": { "description": "Not found" }, "401": { "description": "Unauthorized" } }
      }
    },
    "/reviews/caregiver/{caregiverId}_commented_out_for_w07": {
      "get": {
        "summary": "Get reviews for caregiver",
        "parameters": [{ "name": "caregiverId", "in": "path", "required": true, "schema": { "type": "string" } }],
        "responses": { "200": { "description": "List of reviews" } }
      }
    },
    "/reviews_commented_out_for_w07": {
      "post": {
        "summary": "Create review",
        "security": [{ "cookieAuth": [] }],
        "requestBody": {
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Review" } } }
        },
        "responses": { "201": { "description": "Review created" }, "400": { "description": "Validation error" }, "401": { "description": "Unauthorized" } }
      }
    },
    "/reviews/{id}_commented_out_for_w07": {
      "put": {
        "summary": "Update a review",
        "security": [{ "cookieAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ReviewUpdate" }
            }
          }
        },
        "responses": { "200": { "description": "Review updated" }, "400": { "description": "Validation error" }, "401": { "description": "Unauthorized" }, "403": { "description": "Forbidden" }, "404": { "description": "Not found" } }
      },
      "delete": {
        "summary": "Delete a review",
        "security": [{ "cookieAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
        "responses": { "200": { "description": "Review deleted" }, "401": { "description": "Unauthorized" }, "403": { "description": "Forbidden" }, "404": { "description": "Not found" } }
      }
    }
  },
  "components": {
    "schemas": {
      "User": {
        "type": "object",
        "description": "Fields for updating a user's profile. All are optional.",
        "properties": {
          "firstName": { "type": "string" },
          "lastName": { "type": "string" },
          "phoneNumber": { "type": "string" },
          "address": { "type": "string" },
          "role": { "type": "string", "enum": ["client", "caregiver"], "description": "User role, can only be set at creation." }
        }
      },
      "CaregiverProfile": {
        "type": "object",
        "description": "Represents a caregiver's professional profile.",
        "properties": {
          "userId": { "type": "string", "description": "Reference to the user account.", "readOnly": true },
          "bio": { "type": "string" },
          "profilePictureUrl": { "type": "string", "format": "uri" },
          "yearsOfExperience": { "type": "integer" },
          "certifications": { "type": "array", "items": { "type": "string" } },
          "servicesOffered": { "type": "array", "items": { "type": "string" } },
          "hourlyRate": { "type": "number", "format": "float" }
        }
      },
      "Booking_commented_out_for_w06": {
        "type": "object",
        "properties": {
          "clientId": { "type": "string", "readOnly": true },
          "caregiverId": { "type": "string" },
          "date": { "type": "string", "format": "date" },
          "startTime": { "type": "string", "format": "time" },
          "endTime": { "type": "string", "format": "time" },
          "status": { "type": "string", "enum": ["pending", "confirmed", "completed", "cancelled"] },
          "notes": { "type": "string" }
        }
      },
      "Review": {
        "type": "object",
        "properties": {
          "bookingId": { "type": "string" },
          "clientId": { "type": "string", "readOnly": true },
          "caregiverId": { "type": "string" },
          "rating": { "type": "integer", "minimum": 1, "maximum": 5 },
          "comment": { "type": "string" },
          "createdAt": { "type": "string", "format": "date-time", "readOnly": true }
        }
      },
      "ReviewUpdate": {
        "type": "object",
        "properties": {
          "rating": { "type": "integer", "minimum": 1, "maximum": 5 },
          "comment": { "type": "string" }
        },
        "description": "Fields for updating a review. All are optional."
      }
    },
    "securitySchemes": {
      "cookieAuth": {
        "type": "apiKey",
        "in": "cookie",
        "name": "connect.sid"
      }
    }
  }
}
