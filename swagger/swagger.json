{
  "openapi": "3.0.0",
  "info": {
    "title": "Caregiver Connect API",
    "version": "1.0.0",
    "description": "API documentation for Caregiver Connect platform."
  },
  "servers": [
    { "url": "https://caregiver-connect-api.onrender.com", "description": "Production Server" },
    { "url": "http://localhost:3000", "description": "Local Development Server" }
  ],
  "paths": {
    "/auth/login": {
      "get": {
        "summary": "Log in with GitHub",
        "description": "Initiates the GitHub OAuth2 login flow. Open this link in a new browser tab. After successful authorization, you will be shown a page with your authentication token. Copy this token.",
        "responses": { "302": { "description": "Redirect to GitHub for authentication." } }
      }
    },
    "/auth/github/callback": {
      "get": {
        "summary": "GitHub OAuth callback",
        "description": "This is the callback URL that GitHub redirects to after a user authorizes the application. It is handled automatically by the server and not intended for direct use.",
        "responses": { "200": { "description": "Returns the authentication token." } }
      }
    },
    "/users/me": {
      "get": {
        "summary": "Get current user profile",
        "security": [{ "bearerAuth": [] }],
        "responses": { "200": { "description": "User profile" }, "401": { "description": "Unauthorized" } }
      },
      "put": {
        "summary": "Update current user profile",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
        },
        "responses": { "200": { "description": "Updated user profile" }, "400": { "description": "Validation error" }, "401": { "description": "Unauthorized" } }
      }
    },
    "/profiles": {
      "get": {
        "summary": "Get all caregiver profiles",
        "responses": { "200": { "description": "List of profiles" } }
      },
      "post": {
        "summary": "Create caregiver profile",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/CaregiverProfile" } } }
        },
        "responses": { "201": { "description": "Profile created" }, "400": { "description": "Validation error" }, "401": { "description": "Unauthorized" } }
      }
    },
    "/profiles/{id}": {
      "get": {
        "summary": "Get caregiver profile by user ID",
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
        "responses": { "200": { "description": "Profile" }, "404": { "description": "Not found" } }
      },
      "put": {
        "summary": "Update caregiver profile",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
        "requestBody": {
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/CaregiverProfile" } } }
        },
        "responses": { "200": { "description": "Profile updated" }, "400": { "description": "Validation error" }, "401": { "description": "Unauthorized" }, "404": { "description": "Not found" } }
      },
      "delete": {
        "summary": "Delete caregiver profile",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
        "responses": { "200": { "description": "Profile deleted" }, "401": { "description": "Unauthorized" }, "403": { "description": "Forbidden" }, "404": { "description": "Not found" } }
      }
    },
    "/bookings": {
      "get": {
        "summary": "Get all bookings for current user",
        "security": [{ "bearerAuth": [] }],
        "responses": { "200": { "description": "List of bookings" }, "401": { "description": "Unauthorized" } }
      },
      "post": {
        "summary": "Create booking",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Booking" } } }
        },
        "responses": { "201": { "description": "Booking created" }, "400": { "description": "Validation error" }, "401": { "description": "Unauthorized" } }
      }
    },
    "/bookings/{id}": {
      "get": {
        "summary": "Get booking by ID",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
        "responses": { "200": { "description": "Booking" }, "404": { "description": "Not found" }, "401": { "description": "Unauthorized" } }
      },
      "put": {
        "summary": "Update booking",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
        "requestBody": {
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Booking" } } }
        },
        "responses": { "200": { "description": "Booking updated" }, "400": { "description": "Validation error" }, "401": { "description": "Unauthorized" }, "404": { "description": "Not found" } }
      },
      "delete": {
        "summary": "Delete booking",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
        "responses": { "200": { "description": "Booking deleted" }, "404": { "description": "Not found" }, "401": { "description": "Unauthorized" } }
      }
    },
    "/reviews/caregiver/{caregiverId}": {
      "get": {
        "summary": "Get reviews for caregiver",
        "parameters": [{ "name": "caregiverId", "in": "path", "required": true, "schema": { "type": "string" } }],
        "responses": { "200": { "description": "List of reviews" } }
      }
    },
    "/reviews": {
      "post": {
        "summary": "Create review",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Review" } } }
        },
        "responses": { "201": { "description": "Review created" }, "400": { "description": "Validation error" }, "401": { "description": "Unauthorized" } }
      }
    },
    "/reviews/{id}": {
      "put": {
        "summary": "Update a review",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ReviewUpdate" }
            }
          }
        },
        "responses": { "200": { "description": "Review updated" }, "400": { "description": "Validation error" }, "401": { "description": "Unauthorized" }, "403": { "description": "Forbidden" }, "404": { "description": "Not found" } }
      },
      "delete": {
        "summary": "Delete a review",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
        "responses": { "200": { "description": "Review deleted" }, "401": { "description": "Unauthorized" }, "403": { "description": "Forbidden" }, "404": { "description": "Not found" } }
      }
    }
  },
  "components": {
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "firstName": { "type": "string" },
          "lastName": { "type": "string" },
          "phoneNumber": { "type": "string" },
          "address": { "type": "string" }
        }
      },
      "CaregiverProfile": {
        "type": "object",
        "properties": {
          "bio": { "type": "string" },
          "yearsOfExperience": { "type": "integer" },
          "hourlyRate": { "type": "number" }
        }
      },
      "Booking": {
        "type": "object",
        "properties": {
          "caregiverId": { "type": "string" },
          "startTime": { "type": "string", "format": "date-time" },
          "endTime": { "type": "string", "format": "date-time" },
          "status": { "type": "string" },
          "notes": { "type": "string" }
        }
      },
      "Review": {
        "type": "object",
        "properties": {
          "bookingId": { "type": "string" },
          "caregiverId": { "type": "string" },
          "rating": { "type": "integer", "minimum": 1, "maximum": 5 },
          "comment": { "type": "string" }
        }
      },
      "ReviewUpdate": {
        "type": "object",
        "properties": {
          "rating": { "type": "integer", "minimum": 1, "maximum": 5 },
          "comment": { "type": "string" }
        },
        "description": "Fields for updating a review. All are optional."
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  }
}
